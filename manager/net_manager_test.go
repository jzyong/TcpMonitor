package manager

import (
	"fmt"
	"github.com/google/gopacket/bytediff"
	"github.com/jzyong/golib/log"
	"github.com/oschwald/geoip2-golang"
	"net"
	"testing"
)

// 打印网卡信息
func TestPrintAllDevices(t *testing.T) {
	PrintAllDevices()
}

// 比较两个byte 数组
func TestByteDiffer(t *testing.T) {
	var sliceA = []byte{
		0x00, 0x00, 0x0c, 0x9f, 0xf0, 0x29, 0xbc, 0x30, 0x5b, 0xe8, 0xd3, 0x49,
		0x08, 0x20, 0x45, 0x00, 0x01, 0xa4, 0x39, 0xdf, 0x40, 0x00, 0x40, 0x06,
		0x55, 0x5a, 0xac, 0x11, 0x51, 0x49, 0xad, 0xde, 0xfe, 0xe1, 0xc5, 0xf7,
	}
	var sliceB = []byte{
		0x00, 0x00, 0x0c, 0x9f, 0xf0, 0x20, 0xbc, 0x30, 0x5b, 0xe8, 0xd3, 0x49,
		0x08, 0x00, 0x45, 0x00, 0x01, 0xa4, 0x39, 0xdf, 0x40, 0x00, 0x40, 0x06,
		0x55, 0x5a, 0xac, 0xa1, 0x51, 0x49, 0xad, 0xde, 0xfe, 0xe1, 0xc5, 0xf7,
	}
	fmt.Println(bytediff.BashOutput.String(bytediff.Diff(sliceA, sliceB)))
}

// IP地址
func TestIpToMap(t *testing.T) {
	db, err := geoip2.Open("D:\\Go\\slots-service\\net-service\\config\\GeoLite2-City.mmdb")
	if err != nil {
		fmt.Println(err)
		return
	}
	ip := net.ParseIP("125.70.79.126")
	city, err := db.City(ip)
	if err != nil {
		fmt.Println(err)
		return
	}
	log.Info("位置：%v %v %v", city.Country.IsoCode, city.Location.Longitude, city.Location.Latitude)
}
